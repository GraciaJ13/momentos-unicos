{% extends "paginaprincipal.html" %}

{% load static %}

{% block title %}Página de Novios - Momentos Únicos{% endblock %}

{% block header_extras %}
  <div class="container nav">
    <div class="logo">
      <div class="mark">M</div>
      <div>
        <div style="font-size:.95rem">Momentos Únicos</div>
        <div style="font-size:.75rem;color:#888;margin-top:2px">Celebra de forma simple y sostenible</div>
      </div>
    </div>
    <nav>
      <ul>
        <li><a href="#como-funciona">Cómo funciona</a></li>
        <li><a id="btnContacto">Contactanos</a></li>
      </ul>
    </nav>
    <p>Bienvenido, {{ user.get_full_name|default:user.username }}!</p>
    <a href="{% url 'custom_logout' %}">Cerrar sesión</a>
  </div>
{% endblock %}

{% block content %}
  <div class="opciones">
    <h2>¡Empieza a crear tu Momento Único!</h2>

    <!-- Carrusel para Ver Proveedores -->
    <div class="cuadro carousel-container">
      <a href="{% url 'ver-proveedores' %}">
        <div class="carousel">
          <div class="carousel-slide">
            <!-- Agrega tus imágenes aquí, ejemplo: -->
            <img src="{% static 'img/Bodaejemplo' %}" alt="Proveedor 1">
            <img src="{% static 'img/Bodaejemplo2' %}" alt="Proveedor 2">
            <img src="{% static 'img/Bodaejemplo3' %}" alt="Proveedor 3">
            <img src="{% static 'img/Bodaejemplo4' %}" alt="Proveedor 4">
          </div>
          <button class="carousel-prev">&#10094;</button>
          <button class="carousel-next">&#10095;</button>
        </div>
        <p>Ver Proveedores</p>
      </a>
    </div>

    <!-- Carrusel para Crear Boda -->
    <div class="cuadro carousel-container">
      <a href="{% url 'crear_boda' %}">
        <div class="carousel">
          <div class="carousel-slide">
            <!-- Agrega tus imágenes aquí, ejemplo: -->
            <!-- <img src="{% static 'img/boda1.jpg' %}" alt="Boda 1"> -->
            <!-- <img src="{% static 'img/boda2.jpg' %}" alt="Boda 2"> -->
          </div>
          <button class="carousel-prev">&#10094;</button>
          <button class="carousel-next">&#10095;</button>
        </div>
        <p>Crear Boda</p>
      </a>
    </div>

    {% if has_boda %}
      <div class="cuadro">
        <a href="{% url 'crear_invitados' %}">Crear Lista de Invitados</a>
      </div>
      <div class="cuadro">
        <a href="{% url 'gestion_regalos' %}">Crear Lista de Regalos</a>
      </div>
      <div class="cuadro">
        <a href="{% url 'agregar_cancion' %}">Agregar Canción (para Invitados)</a>
      </div>
    {% else %}
      <!-- Mensaje flotante con JavaScript -->
      <div id="alertMessage" class="alert" style="display:none; position:fixed; top:20px; right:20px; background-color:#f44336; color:white; padding:10px; border-radius:5px; z-index:1000;">
        Primero crea tu boda para poder avanzar.
        <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
      </div>
      <script>
        // Mostrar el mensaje flotante si no hay boda
        document.addEventListener('DOMContentLoaded', function() {
          var alert = document.getElementById('alertMessage');
          if (!{{ has_boda|lower }}) {
            alert.style.display = 'block';
            setTimeout(function(){ alert.style.display = 'none'; }, 5000); // Ocultar después de 5 segundos
          }
        });
      </script>
    {% endif %}

    <!-- Estilos CSS para el carrusel -->
    <style>
      .carousel-container {
        position: relative;
        width: 100%;
        max-width: 300px; /* Ajusta según necesites */
        margin: 10px auto;
      }
      .carousel {
        position: relative;
        overflow: hidden;
      }
      .carousel-slide {
        display: flex;
        transition: transform 0.5s ease;
      }
      .carousel-slide img {
        width: 100%;
        height: auto;
      }
      .carousel-prev, .carousel-next {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background-color: rgba(0, 0, 0, 0.5);
        color: white;
        border: none;
        padding: 10px;
        cursor: pointer;
      }
      .carousel-prev {
        left: 0;
      }
      .carousel-next {
        right: 0;
      }
      .carousel-prev:hover, .carousel-next:hover {
        background-color: rgba(0, 0, 0, 0.8);
      }
    </style>

    <!-- JavaScript para el carrusel -->
    <script>
      let currentSlide = 0;
      const slides = document.querySelectorAll('.carousel-slide');

      function showSlide(index) {
        slides.forEach((slide, i) => {
          slide.style.transform = `translateX(-${index * 100}%)`;
        });
      }

      document.querySelectorAll('.carousel-next').forEach(button => {
        button.addEventListener('click', () => {
          currentSlide = (currentSlide + 1) % slides.length;
          showSlide(currentSlide);
        });
      });

      document.querySelectorAll('.carousel-prev').forEach(button => {
        button.addEventListener('click', () => {
          currentSlide = (currentSlide - 1 + slides.length) % slides.length;
          showSlide(currentSlide);
        });
      });

      // Iniciar con la primera diapositiva
      showSlide(currentSlide);
    </script>
  </div>
{% endblock %}